{% extends 'fish_web_service/header-footer.html' %}

{% block content %}
<h1>Add a New Fish</h1>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <p>
        <label for="id_name">Name:</label>
        <input type="text" name="name" id="id_name" required>
    </p>
    <p>
        <label for="id_type">Type:</label>
        <input type="text" name="type" id="id_type" required>
    </p>
    <p>
        <label for="id_habitat">Habitat:</label>
        <input type="text" name="habitat" id="id_habitat" required>
    </p>
    <p>
        <label for="id_habitat_detail_info">Habitat Detail Info:</label>
        <textarea name="habitat_detail_info" id="id_habitat_detail_info" required></textarea>
    </p>
    <p>
        <label for="id_description">Description:</label>
        <textarea name="description" id="id_description" required></textarea>
    </p>
    <p>
        <label for="id_food">Food:</label>
        <textarea name="food" id="id_food" required></textarea>
    </p>
    <p>
        <label for="id_compatibility">Compatibility:</label>
        <textarea name="compatibility" id="id_compatibility"></textarea>
    </p>
    <p>
        <label for="id_photos_count">Photos Count:</label>
        <input type="number" name="photos_count" id="id_photos_count" required>
    </p>
    <div id="imageInputs"></div>
    <button type="submit">Add Fish</button>
    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}
</form>
<br>
<button onclick="window.location.href='/'">Back to main page</button>
<script>
    document.getElementById('id_photos_count').addEventListener('change', function() {
        var count = document.getElementById('id_photos_count').value;
        var imageInputs = document.getElementById('imageInputs');
        imageInputs.innerHTML = '';
        for (var i = 0; i < count; i++) {
            var label = document.createElement('label');
            label.setAttribute('for', 'image' + (i + 1));
            label.innerHTML = 'Image ' + (i + 1) + ': ';
            var input = document.createElement('input');
            input.setAttribute('type', 'file');
            input.setAttribute('id', 'image' + (i + 1));
            input.setAttribute('name', 'images');
            input.setAttribute('required', true);
            imageInputs.appendChild(label);
            imageInputs.appendChild(input);
            imageInputs.appendChild(document.createElement('br'));
        }
    });
</script>
{% endblock %}
